{% extends 'base.html.twig' %}
{% block stylesheets %}
{{ parent() }}
<link rel="stylesheet" href=" {{ asset("bundles/tache/css/style.css") }} ">
<style type="text/css">
   
</style>
{% endblock  %}
{% block scripts %}
{{ parent() }}
{# <script src="{{ asset('js/plugins/select2/select2.full.min.js') }}"></script> #}
<script src="{{ asset('bundles/tache/js/consultation.js') }}"></script>
{% endblock %}
{% block contenu %}
    {% set statut = "" %}
    <div class="t-block">
        <div class="t-title">
            <h2>LISTE DES TACHES</h2>
        </div>
        <div class="liste-tache container mt-3">
        <div class="table-responsive">
        <table class="table table-sm table-bordered">
            <thead >
                <tr>
                    <th class="text-center">Statut</th>
                    <th>Tâche</th>
                    <th>Date d'éxecution</th>
                    <th>Durée</th>
                    <th>Personne(s) assigné(s)</th>
                    <th>Type tâche</th>
                    <th>Commentaire</th>
                    <th class="text-center">Action</th>
                </tr>
            </thead>
            <tbody>
            {% set i = 0 %}
            {% for uneTache in baseTache %}
                {% if uneTache.statut == 0 %}
                    {% set statut = "tache_noncommencee" %}
                {% elseif uneTache.statut == 1 %}
                    {% set statut = "tache_encours" %}
                {% elseif uneTache.statut == 2 %}
                    {% set statut = "tache_terminee" %}
                {% else  %}
                    {% set statut = "tache_depassee" %}
                {% endif %}
                <tr>
                    <td class="text-center"><div class="content-center"><div class="statut-tache {{ statut }} "></div></div></td>
                    <td>{{ uneTache.tache }}</td>
                    <td>Du {{ uneTache.dateDebut }}  Au {{ uneTache.dateFin }}</td>
                    <td>{{ uneTache.duree }} {{ uneTache.type_duree }}</td>
                    <td>
                    {% for unePersonne in tabTachePers[i] %}
                        {% if unePersonne.idtache == uneTache.id %}
                            {{ unePersonne.username }}, 
                        {% endif %}
                    {% endfor %}
                    </td>
                    <td>
                    {% for uneType in tabTypeTache[i] %}
                        {% if uneType.idtache == uneTache.id %}
                            {{ uneType.nom_type_tache }},
                        {% endif %}
                    {% endfor %}
                    </td>
                    <td>{{ tabCommentTache[i]|length }} commentaire(s)</td>
                    <td class="text-center"><a href="{{ path('tache_afficher_details',{idTache:uneTache.id}) }}" class="btn bouton_afficher btn-success btn-sm"><i class="fa fa-info-circle"></i>&emsp;Afficher</a></td>
                </td>
            {% set i = i + 1 %}
            {% endfor %}
            </tbody>
        </table>
    </div>
        </div>
    </div>
{% endblock %}